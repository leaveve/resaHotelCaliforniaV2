<!DOCTYPE html>
<html lang="fr">
<head>
  <title>Liste des Réservations</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
    <h1 class="mb-4">Liste des Réservations</h1>

    <div class="d-flex justify-content-end mb-3">
        <a href="/reservations/create" class="btn btn-success">
            <i class="bi bi-plus-circle"></i> Nouvelle Réservation
        </a>
    </div>

    <div class="table-responsive">
        <table class="table table-bordered table-striped align-middle text-center">
            <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Client</th>
                    <th>Contact</th>
                    <th>Chambre</th>
                    <th>Personnes</th>
                    <th>Arrivée</th>
                    <th>Départ</th>
                    <th>Statut</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <% if (reservations.length > 0) { %>
                    <% reservations.forEach(r => { %>
                        <tr>
                            <td><%= r.id %></td>
                            <td><%= r.client_nom %></td>
                            <td>
                                <div><strong>Tél:</strong> <%= r.client_telephone %></div>
                                <div><strong>Email:</strong> <%= r.client_email %></div>
                            </td>
                            <td>
                                N° <%= r.chambre_numero %> 
                                (<%= r.chambre_capacite %> pers.)
                            </td>
                            <td><%= r.nombre_personnes %></td>
                            <td><%= r.date_arrivee %></td>
                            <td><%= r.date_depart %></td>
                            <td>
                                <span class="badge 
                                    <% if(r.statut_class === 'status-past'){ %> bg-secondary 
                                    <% } else if(r.statut_class === 'status-active'){ %> bg-success 
                                    <% } else { %> bg-warning text-dark <% } %>">
                                    <%= r.statut %>
                                </span>
                            </td>
                            <td>
                                <a href="/reservations/view/<%= r.id %>" class="btn btn-sm btn-info text-white">Voir</a>
                                <a href="/reservations/edit/<%= r.id %>" class="btn btn-sm btn-primary">Modifier</a>
                                <a href="/reservations/delete/<%= r.id %>" 
                                   class="btn btn-sm btn-danger"
                                   onclick="return confirm('Supprimer cette réservation ?');">
                                   Supprimer
                                </a>
                            </td>
                        </tr>
                    <% }) %>
                <% } else { %>
                    <tr>
                        <td colspan="9" class="text-center">Aucune réservation trouvée.</td>
                    </tr>
                <% } %>
            </tbody>
        </table>
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
